!function(f){f(document).ready(function(){f(".af-field-dropdown.floating").parents(".acf-input").find("input").addClass("has-field-inserter"),f(document).on("click",".af-dropdown .field-option",function(e){e.stopPropagation();var t,a,o,n=f(this),i=n.data("insert-value"),d=n.parents(".acf-field").first().find(".wp-editor-area");0<d.length?tinymce.editors[d.attr("id")].editorCommands.execCommand("mceInsertContent",!1,i):(a=n.parents(".acf-input").first().find("input[type=text]"),t=a.get(0),e=i,(d=t)&&(n=d.scrollTop,a=0,"ie"==(i=d.selectionStart||"0"==d.selectionStart?"ff":!!document.selection&&"ie")?(d.focus(),(o=document.selection.createRange()).moveStart("character",-d.value.length),a=o.text.length):"ff"==i&&(a=d.selectionStart),t=d.value.substring(0,a),o=d.value.substring(a,d.value.length),d.value=t+e+o,a+=e.length,"ie"==i?(d.focus(),(e=document.selection.createRange()).moveStart("character",-d.value.length),e.moveStart("character",a),e.moveEnd("character",0),e.select()):"ff"==i&&(d.selectionStart=a,d.selectionEnd=a,d.focus()),d.scrollTop=n)),f(".af-field-dropdown").removeClass("open")}),f(document).on("click",function(){f(".af-field-dropdown").removeClass("open")}),f(document).on("click",".af-field-dropdown",function(e){e.stopPropagation();e=f(this);e.hasClass("open")?e.removeClass("open"):(f(".af-field-dropdown").removeClass("open"),e.addClass("open"))}),f('.acf-field[data-type="field_picker"]').each(function(){function e(){var e=t.find(".format-input");"custom"==t.find("select").val()?e.show():e.hide()}var t=f(this);t.find("select").on("change",e),e()}),f(".zapier-test-button").click(function(){var e=f(this),t=e.parent().find("input"),a=e.data("form-key");e.attr("disabled","disabled");var o=e.outerWidth();e.css("width",o+"px");o=f('<span class="spinner is-active">');e.empty().append(o);t={action:"test_zapier_submission",form_key:a,webhook_url:t.val()};f.post(ajaxurl,t,function(){e.html("Sent!"),setTimeout(function(){e.removeAttr("disabled"),e.css("width",""),e.html(e.data("text"))},3e3)})});var e=f(".post-type-af_form #posts-filter");e.wrap('<div class="af-forms-wrapper" />'),e.addClass("af-forms-list"),e.after(f("#af-sidebar-template").html());var n=f(".af-form-export");n.find(".copy-button").click(function(){var e=f(this),t=n.find(".export-code").text(),a=f("<textarea>");f("body").append(a),a.val(t).select(),document.execCommand("copy"),a.remove();var o=e.text();e.text(e.data("copied-text")),e.attr("disabled",!0),setTimeout(function(){e.text(o),e.attr("disabled",null)},1e3)})}),f(document).ready(function(){function a(e,a){e&&f.ajax({url:acf.get("ajaxurl"),data:{action:"af_gutenberg_get_form_data",form_key:e},type:"post",success:function(e){var t=a.find(".edit-form-link");e.data.edit_url?(t.show(),t.attr("href",e.data.edit_url)):t.hide(),acf.doAction("af/admin/gutenberg/form_selected",e.data,a)}})}acf.addAction("new_field/name=af_block_form",function(e){var t=e.$el.closest(".acf-block-component");a(e.val(),t),e.$input().change(function(){a(e.val(),t)})}),acf.addFilter("select2_ajax_data",function(e,t,a,o,n){if("field_af_block_exclude_fields"!=o.data.key)return e;o=o.$el.closest(".acf-block-component"),o=acf.getField(o.find(".acf-field-af-block-form"));return e.form=o.val(),e})})}(jQuery),jQuery(document).ready(function(){acf.addAction("af/admin/gutenberg/form_selected",function(e,t){var a=!!e.form.editing.post;t.find(".acf-field-af-block-post-editing").toggle(a),t.find(".acf-field-af-block-post-to-edit").toggle(a),t.find(".acf-field-af-block-post-editing-disabled-message").toggle(!a);e=!!e.form.editing.user;t.find(".acf-field-af-block-user-editing").toggle(e),t.find(".acf-field-af-block-user-to-edit").toggle(e),t.find(".acf-field-af-block-user-editing-disabled-message").toggle(!e)})});
var af;!function(f){"undefined"!=typeof acf?((af={forms:{},setup_form:function(e){var a=e.attr("data-key"),t={$el:e,key:a,submissionSteps:[]};this.pages.initialize(t),this.ajax.initialize(t),this.forms[a]=t;var i=this;t.$el.on("submit",function(e){e.preventDefault(),t.$el.find(".af-submit-button").prop("disabled",!0);e=t.$el.data("acf");e&&e.set("status",""),acf.validation.fetch({form:t.$el,success:function(){var e=t.submissionSteps.slice();i.executeSubmissionSteps(t,e)},complete:function(){t.$el.find(".af-submit-button").prop("disabled",!1)}})}),acf.doAction("af/form/setup",t)},lock(e){e.$el.find(".af-submit-button").prop("disabled",!0),acf.validation.lockForm(e.$el)},unlock(e){e.$el.find(".af-submit-button").prop("disabled",!1),acf.validation.unlockForm(e.$el)},addSubmissionStep(e,a,t){for(var i={priority:a,fn:t},n=0;n<e.submissionSteps.length;n++)if(a<e.submissionSteps[n].priority)return void e.submissionSteps.splice(n,0,i);e.submissionSteps.push(i)},executeSubmissionSteps(e,a){function t(){af.lock(e),e.$el.get(0).submit()}var i,n,c;0!=a.length?(i=a.shift(),n=this,c=0==a.length?t:function(){n.executeSubmissionSteps(e,a)},i.fn(c)):t()}}).pages={initialize:function(c){var e,s,a=this;$page_fields=c.$el.find(".acf-field-page"),$page_fields.exists()&&(c.pages=[],c.current_page=0,c.max_page=0,c.show_numbering=!0,c.$page_wrap=f('<div class="af-page-wrap">'),c.$page_wrap.insertBefore($page_fields.first()),c.$previous_button=$page_fields.first().find(".af-previous-button"),c.$next_button=$page_fields.first().find(".af-next-button"),c.show_numbering="true"===$page_fields.first().find(".af-page-button").attr("data-show-numbering"),c.$previous_button.click(function(e){e.preventDefault(),a.previousPage(c)}),c.$next_button.click(function(e){e.preventDefault(),a.nextPage(c)}),(e=c.$el.find(".af-submit")).prepend(c.$next_button),e.prepend(c.$previous_button),c.$submit_button=e.find(".af-submit-button"),s=0,$page_fields.each(function(e,a){var t=f(a),i=s,n=t.nextUntil(".acf-field-page",".acf-field");0!=n.length&&((a=t.find(".af-page-button").attr("data-index",i)).click(function(e){e.preventDefault(),af.pages.navigateToPage(i,c)}),c.show_numbering&&($index=f('<span class="index">').html(i+1),a.prepend($index)),c.$page_wrap.append(a),c.pages.push({$field:t,$fields:n,$button:a}),s++)}),this.refresh(c))},refresh:function(i){f.each(i.pages,function(e,a){var t=e==i.current_page;a.$button.toggleClass("enabled",e<=i.max_page),a.$button.toggleClass("current",t),a.$fields.each(function(){f(this).toggle(t)})});var e=this.isFirstPage(i),a=this.isLastPage(i);i.$previous_button.attr("disabled",!!e||null),i.$next_button.toggle(!a),i.$submit_button.toggle(a)},nextPage:function(e){var a;this.isLastPage(e)||(a=this).validatePage(e,e.current_page,function(){a.changePage(e.current_page+1,e)})},previousPage:function(e){this.isFirstPage(e)||this.changePage(e.current_page-1,e)},navigateToPage:function(e,a){var t;e<0||e>a.max_page||(t=this).validatePage(a,a.current_page,function(){t.changePage(e,a)})},changePage:function(e,a){var t=a.current_page;a.current_page=e,a.max_page<=a.current_page&&(a.max_page=a.current_page),this.refresh(a),acf.doAction("af/form/page_changed",e,t,a)},isFirstPage:function(e){return 0==e.current_page},isLastPage:function(e){return e.current_page==e.pages.length-1},validatePage:function(a,t,e){a.pages[t].$fields.find("input").each(function(){this.checkValidity()});function n(e){for(i=0;i<a.pages.length;i++)i!=t&&e(a.pages[i])}n(function(e){e.$fields.detach()});function c(){n(function(e){e.$fields.insertAfter(e.$field)})}acf.validation.fetch({form:a.$el,lock:!1,reset:!0,success:function(){c(),e()},failure:function(){c()}})}},af.ajax={initialize:function(a){var t=this;a.$el.is("[data-ajax]")&&af.addSubmissionStep(a,100,function(e){t.sendSubmission(a)})},sendSubmission:function(e){var a=new FormData(e.$el.get(0));a.append("action","af_submission"),f.ajax({url:acf.get("ajaxurl"),data:a,processData:!1,contentType:!1,type:"post",success:this.onSuccess(e),error:this.onError(e),complete:function(){af.unlock(e)}})},onSuccess:function(i){return function(e){var a=e.data;switch(acf.doAction("af/form/ajax/submission",a,i),a.type){case"success_message":var t=f(a.success_message);i.$el.find(".af-fields").replaceWith(t);break;case"redirect":window.location.href=a.redirect_url}}},onError:function(t){return function(e){var a=t.$el.data("acf"),e=e.responseJSON.data.errors;a.addErrors(e),a.showErrors()}}},f(document).ready(function(){f(".af-form").each(function(){af.setup_form(f(this))})})):console.error("acf-input.js not found. AF requires ACF to work.")}(jQuery),function(c){af.calculated={initialize:function(t){$calculated_fields=t.$el.find(".acf-field-calculated"),$calculated_fields.each(function(e,a){af.calculated.setupField(t,c(a))})},setupField:function(e,a){function t(){i.refreshField(e,a)}var i=this,n=a.attr("data-name"),c=a.attr("data-key");t(),e.$el.change(t),acf.addAction("af/field/calculated/update_value",t),acf.addAction("af/field/calculated/update_value/name="+n,t),acf.addAction("af/field/calculated/update_value/key="+c,t)},refreshField:function(a,t){var i=this,e=t.attr("data-key"),n=acf.serialize(a.$el);n.action="af_calculated_field",n.calculated_field=e,n=acf.prepare_for_ajax(n),i.lockField(t),c.ajax({url:acf.get("ajaxurl"),data:n,type:"post",success:function(e){i.updateField(a,t,e)},complete:function(){i.unlockField(t)}})},updateField:function(e,a,t){a.find("input.af-calculated-value").val(t),a.find(".af-calculated-content").html(t);var i=a.attr("data-name"),n=a.attr("data-key");acf.doAction("af/field/calculated/value_updated",t,a,e),acf.doAction("af/field/calculated/value_updated/name="+i,t,a,e),acf.doAction("af/field/calculated/value_updated/key="+n,t,a,e)},lockField:function(e){e.find(".af-input").css("opacity",.5)},unlockField:function(e){e.find(".af-input").css("opacity",1)}},af.recaptcha={initialize:function(t){var i,n=af.recaptcha.getSiteKey(t);null!==n&&(i=c('<div class="af-recaptcha-container">').attr("data-size","invisible"),t.$el.find(".af-submit").append(i),af.addSubmissionStep(t,5,function(a){unlockFormTimeout=setTimeout(function(){acf.unlockForm(t.$el)},2e3);var e=grecaptcha.render(i.get(0),{sitekey:n,callback:function(e){clearTimeout(unlockFormTimeout),acf.lockForm(t.$el);e=c('<input type="hidden" name="g-recaptcha-response" />').val(e);t.$el.find(".acf-hidden").append(e),a()}});grecaptcha.execute(e)}))},getSiteKey:function(e){e=e.$el.attr("data-recaptcha-site-key");return void 0!==e&&!1!==e?e:null}},acf.addAction("af/form/setup",af.calculated.initialize),acf.addAction("af/form/setup",af.recaptcha.initialize),af.addPostID=function(e){if(!e.hasOwnProperty("field_key"))return e;var a=e.field_key,a=c('.af-field[data-key="'+a+'"]');if(!a.length)return e;a=a.siblings(".acf-hidden").find('input[name="post_id"]');return a.length&&(e.post_id=a.val()),e},acf.addFilter("prepare_for_ajax",af.addPostID)}(jQuery);